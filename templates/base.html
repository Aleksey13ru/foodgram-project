<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    {% block head %}

    {% endblock %}
</head>

<body class="body">

    {% csrf_token %}

    <header class="header">
        <nav class="nav">
            <div class="nav__container container">
                <ul class="nav__items list">
                    {% with request.resolver_match.url_name as url_name %}
                            <li class="nav__item {% if 'index' in url_name %}nav__item_active{% endif %}"><a href="{% url 'index' %}" class="nav__link link">Рецепты</a></li>
                        {% if user.is_authenticated %}
                            <li class="nav__item {% if 'my_follow' in url_name %}nav__item_active{% endif %}"><a href="{% url 'my_follow' %}" class="nav__link link">Мои подписки</a></li>
                            <li class="nav__item {% if 'new_recipe' in url_name %}nav__item_active{% endif %}"><a href="{% url 'new_recipe' %}" class="nav__link link">Создать рецепт</a></li>
                            <li class="nav__item {% if 'favorite' in url_name %}nav__item_active{% endif %}"><a href="{% url 'favorite' %}" class="nav__link link">Избранное</a></li>
                            <li class="nav__item {% if 'shopping_list' in url_name %}nav__item_active{% endif %}"><a href="{% url 'shopping_list' %}" class="nav__link link">Список покупок</a> <span class="badge badge_style_blue nav__badge" id="counter">{{ user.basket.count  }}</span></li>
                        {% endif %}
                    {% endwith %}
                </ul>
                <ul class="nav__items list">
                    {% if user.is_authenticated %}
                        <li class="nav__item"><a href="{% url 'password_reset' %}" class="nav__link link">Изменить пароль</a></li>
                        <li class="nav__item"><a href="{% url 'logout' %}" class="nav__link link">Выход</a></li>
                    {% else %}
                        <li class="nav__item"><a href="{% url 'login' %}" class="nav__link link">Войти</a></li>
                        <li class="nav__item"><a href="{% url 'signup' %}" class="button button_style_blue">Создать аккаунт</a></li>
                    {% endif %}
                </ul>
            </div>
        </nav>
    </header>

    {% block main %}

    {% endblock %}

    <footer class="footer">
        <div class="footer__container container">
            <a href="{% url 'about-term' %}" class="footer__brand link">Продуктовый помощник</a>
            <ul class="footer__items">
                <li class="footer__item"><a href="{% url 'about-author' %}" class="footer__link link">Об авторе </a></li>
                <li class="footer__item"><a href="{% url 'about-spec' %}" class="footer__link link">Технологии</a></li>
            </ul>
        </div>
    </footer>

    {% block js %}

    {% endblock %}
</body>
</html>
